!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.LoomSE=t():e.LoomSE=t()}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=4)}([function(e,t,r){var n;"undefined"!=typeof self&&self,e.exports=(n=r(3),function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}([function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports={asExpression:function(e,t,r){return"function"!=typeof e?e:e(t,r)},hasProperty:function(e,t){return"object"===(void 0===e?"undefined":n(e))&&Object.prototype.hasOwnProperty.call(e,t)}}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i={ANY_SCHEMA:{},NOT_ANY_SCHEMA:{not:{}}};e.exports={is:function(e){return"object"===(void 0===e?"undefined":n(e))||"boolean"==typeof e},make:function e(t){if("object"!==(void 0===t?"undefined":n(t))||null===t)return{enum:[t]};if(Array.isArray(t))return{items:t.map(e),additionalItems:!1};var r=Object.keys(t);return{properties:r.reduce((function(r,n){return Object.assign({},r,function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},n,e(t[n])))}),{}),required:r}},transform:function(e){return!0===e?i.ANY_SCHEMA:!1===e?i.NOT_ANY_SCHEMA:e},transformation:i}},function(e,t,r){"use strict";function n(e){var t=e.defineErrors,r=e.index;return"\n    "+(t?"const errors = [];":"")+"\n    "+(r?"let i"+Array.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(Array(r))).map((function(e,t){return t+1})).join(",i")+";":"")+"\n  "}function i(e){var t=e.defineErrors,r=e.lines,i=t?"if(errors.length) return errors;":"";return'\n    "use strict";\n    '+n(e)+"\n    "+r.join("\n")+"\n    "+i+"\n  "}e.exports={body:function(e,t){var r=e.cachedIndex,n=e.lines,o=t.context,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s={context:o,inner:a.inner,defineErrors:a.errorHandler,index:r,lines:n};return"\n    "+function(e){var t=e.context;if(e.inner||!t.length)return"";var r=[],n=[];return t.forEach((function(e,t){"number"!=typeof e?r.push(t+1+" = "+e):n.push(t+1+" = f"+(e+1))})),"const f"+r.concat(n).join(", f")+";"}(s)+"\n    function f0(data) {\n      "+i(s)+"\n    }\n    return f0;\n  "},restore:function(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).inner,n=new Function("schema",e)(t);return r||(n.toString=function(){return e}),n},template:function(e,t){function r(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var o=void 0;return r.lines.push(e.replace(/%i/g,(function(){return"i"})).replace(/\$(\d)/g,(function(e,t){return""+n[t-1]})).replace(/(%[sd])/g,(function(){return n.length&&(o=n.shift()),""+o}))),r}function n(e){return e.replace("[","").replace("]","").replace("(","").replace(")","").replace("decodeURIComponent","")}function i(){return this.join(".").replace(/\.\[/g,"[")}var o="function"==typeof t.errorHandler?t.errorHandler:function(e){var t=this.data.toString().replace(/^data/,""),r=t.replace(/\['([^']+)'\]/gi,".$1").replace(/\[(i[0-9]*)\]/gi,"['+$1+']"),i="#"+t.replace(/\[i([0-9]*)\]/gi,"/items").replace(/\['([^']+)'\]/gi,"/properties/$1")+"/"+e;return"return {\n        keyword: '"+e+"',\n        dataPath: decodeURIComponent(\""+n(r)+'"),\n        schemaPath: decodeURIComponent("'+n(i)+'")\n      };'};return Object.assign(r,{cachedIndex:0,cached:[],cache:function(e){var t=r.cached[r.cached.length-1];return t[e]?"i"+t[e]:(r.cachedIndex+=1,t[e]=r.cachedIndex,"(i"+t[e]+" = "+e+")")},data:["data"],error:o,lines:[],schema:["schema"],push:r,link:function(t){return"f"+e.link(t)},visit:function(t){r.cached.push({}),e.visit(t,r),r.cached.pop()}}),r.data.toString=i,r.schema.toString=i,r},expression:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var o=n[n.length-1]||{},a=[e[0]];return r.forEach((function(t,r){var i=Number.isInteger(t)?n[t]:o[t];a.push(i,e[r+1])})),a.join("")}}}},function(e,t,r){"use strict";function n(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var i=n(["!/^[a-zA-Z]+$/.test(",")"],["!/^[a-zA-Z]+$/.test(",")"]),o=n(["!/^[a-zA-Z0-9]+$/.test(",")"],["!/^[a-zA-Z0-9]+$/.test(",")"]),a=n(["!/^[-_a-zA-Z0-9]+$/.test(",")"],["!/^[-_a-zA-Z0-9]+$/.test(",")"]),s=n(["!/^[a-fA-F0-9]+$/.test(",")"],["!/^[a-fA-F0-9]+$/.test(",")"]),c=n(["!/^[0-9]+$/.test(",")"],["!/^[0-9]+$/.test(",")"]),f=n(["isNaN(Date.parse(",")) || ~",".indexOf('/')"],["isNaN(Date.parse(",")) || ~",".indexOf(\\'/\\')"]),u=n([""," !== ",".toUpperCase()"],[""," !== ",".toUpperCase()"]),l=n([""," !== ",".toLowerCase()"],[""," !== ",".toLowerCase()"]),d=n(["",".length >= 256 || !/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9])(\\.([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9]))*$/.test(",")"],["",".length >= 256 || !/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\\\-]{0,61}[a-zA-Z0-9])(\\\\.([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\\\-]{0,61}[a-zA-Z0-9]))*$/.test(",")"]),p=n(["!/^[A-Za-z][A-Za-z0-9+\\-.]*:(?:\\/\\/(?:(?:[A-Za-z0-9\\-._~!$&'()*+,;=:]|%[0-9A-Fa-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9A-Fa-f]{1,4}:){6}|::(?:[0-9A-Fa-f]{1,4}:){5}|(?:[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,1}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){3}|(?:(?:[0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){2}|(?:(?:[0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}:|(?:(?:[0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})?::)(?:[0-9A-Fa-f]{1,4}:[0-9A-Fa-f]{1,4}|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))|(?:(?:[0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})?::)|[Vv][0-9A-Fa-f]+\\.[A-Za-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)|(?:[A-Za-z0-9\\-._~!$&'()*+,;=]|%[0-9A-Fa-f]{2})*)(?::[0-9]*)?(?:\\/(?:[A-Za-z0-9\\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*|\\/(?:(?:[A-Za-z0-9\\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})+(?:\\/(?:[A-Za-z0-9\\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*)?|(?:[A-Za-z0-9\\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})+(?:\\/(?:[A-Za-z0-9\\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*|)(?:\\?(?:[A-Za-z0-9\\-._~!$&'()*+,;=:@\\/?]|%[0-9A-Fa-f]{2})*)?(?:\\#(?:[A-Za-z0-9\\-._~!$&'()*+,;=:@\\/?]|%[0-9A-Fa-f]{2})*)?$/.test(",")"],["!/^[A-Za-z][A-Za-z0-9+\\\\-.]*:(?:\\\\/\\\\/(?:(?:[A-Za-z0-9\\\\-._~!$&\\'()*+,;=:]|%[0-9A-Fa-f]{2})*@)?(?:\\\\[(?:(?:(?:(?:[0-9A-Fa-f]{1,4}:){6}|::(?:[0-9A-Fa-f]{1,4}:){5}|(?:[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,1}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){3}|(?:(?:[0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){2}|(?:(?:[0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}:|(?:(?:[0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})?::)(?:[0-9A-Fa-f]{1,4}:[0-9A-Fa-f]{1,4}|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))|(?:(?:[0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})?::)|[Vv][0-9A-Fa-f]+\\\\.[A-Za-z0-9\\\\-._~!$&\\'()*+,;=:]+)\\\\]|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)|(?:[A-Za-z0-9\\\\-._~!$&\\'()*+,;=]|%[0-9A-Fa-f]{2})*)(?::[0-9]*)?(?:\\\\/(?:[A-Za-z0-9\\\\-._~!$&\\'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*|\\\\/(?:(?:[A-Za-z0-9\\\\-._~!$&\\'()*+,;=:@]|%[0-9A-Fa-f]{2})+(?:\\\\/(?:[A-Za-z0-9\\\\-._~!$&\\'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*)?|(?:[A-Za-z0-9\\\\-._~!$&\\'()*+,;=:@]|%[0-9A-Fa-f]{2})+(?:\\\\/(?:[A-Za-z0-9\\\\-._~!$&\\'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*|)(?:\\\\?(?:[A-Za-z0-9\\\\-._~!$&\\'()*+,;=:@\\\\/?]|%[0-9A-Fa-f]{2})*)?(?:\\\\#(?:[A-Za-z0-9\\\\-._~!$&\\'()*+,;=:@\\\\/?]|%[0-9A-Fa-f]{2})*)?$/.test(",")"]),h=n(["!/^[^@]+@[^@]+\\.[^@]+$/.test(",")"],["!/^[^@]+@[^@]+\\\\.[^@]+$/.test(",")"]),y=n(["!/^(\\d?\\d?\\d){0,255}\\.(\\d?\\d?\\d){0,255}\\.(\\d?\\d?\\d){0,255}\\.(\\d?\\d?\\d){0,255}$/.test(",") || ",'.split(".")[3] > 255'],["!/^(\\\\d?\\\\d?\\\\d){0,255}\\\\.(\\\\d?\\\\d?\\\\d){0,255}\\\\.(\\\\d?\\\\d?\\\\d){0,255}\\\\.(\\\\d?\\\\d?\\\\d){0,255}$/.test(",") || ",'.split(".")[3] > 255']),m=n(["!/^((?=.*::)(?!.*::.+::)(::)?([\\dA-F]{1,4}:(:|\\b)|){5}|([\\dA-F]{1,4}:){6})((([\\dA-F]{1,4}((?!\\3)::|:\\b|$))|(?!\\2\\3)){2}|(((2[0-4]|1\\d|[1-9])?\\d|25[0-5])\\.?\\b){4})$/.test(",")"],["!/^((?=.*::)(?!.*::.+::)(::)?([\\\\dA-F]{1,4}:(:|\\\\b)|){5}|([\\\\dA-F]{1,4}:){6})((([\\\\dA-F]{1,4}((?!\\\\3)::|:\\\\b|$))|(?!\\\\2\\\\3)){2}|(((2[0-4]|1\\\\d|[1-9])?\\\\d|25[0-5])\\\\.?\\\\b){4})$/.test(",")"]),v=n(["/[^\\\\]\\\\[^.*+?^${}()|[\\]\\\\bBcdDfnrsStvwWxu0-9]/i.test(",")"],["/[^\\\\\\\\]\\\\\\\\[^.*+?^\\${}()|[\\\\]\\\\\\\\bBcdDfnrsStvwWxu0-9]/i.test(",")"]),A=n(["!/^$|^\\/(?:~(?=[01])|[^~])*$/i.test(",")"],["!/^$|^\\\\/(?:~(?=[01])|[^~])*$/i.test(",")"]),b=n(["!/^(?:[A-Za-z][A-Za-z0-9+\\-.]*:(?:\\/\\/(?:(?:[A-Za-z0-9\\-._~!$&'()*+,;=:]|%[0-9A-Fa-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9A-Fa-f]{1,4}:){6}|::(?:[0-9A-Fa-f]{1,4}:){5}|(?:[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,1}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){3}|(?:(?:[0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){2}|(?:(?:[0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}:|(?:(?:[0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})?::)(?:[0-9A-Fa-f]{1,4}:[0-9A-Fa-f]{1,4}|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))|(?:(?:[0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})?::)|[Vv][0-9A-Fa-f]+\\.[A-Za-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)|(?:[A-Za-z0-9\\-._~!$&'()*+,;=]|%[0-9A-Fa-f]{2})*)(?::[0-9]*)?(?:\\/(?:[A-Za-z0-9\\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*|\\/(?:(?:[A-Za-z0-9\\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})+(?:\\/(?:[A-Za-z0-9\\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*)?|(?:[A-Za-z0-9\\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})+(?:\\/(?:[A-Za-z0-9\\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*|)(?:\\?(?:[A-Za-z0-9\\-._~!$&'()*+,;=:@\\/?]|%[0-9A-Fa-f]{2})*)?(?:\\#(?:[A-Za-z0-9\\-._~!$&'()*+,;=:@\\/?]|%[0-9A-Fa-f]{2})*)?|(?:\\/\\/(?:(?:[A-Za-z0-9\\-._~!$&'()*+,;=:]|%[0-9A-Fa-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9A-Fa-f]{1,4}:){6}|::(?:[0-9A-Fa-f]{1,4}:){5}|(?:[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,1}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){3}|(?:(?:[0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){2}|(?:(?:[0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}:|(?:(?:[0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})?::)(?:[0-9A-Fa-f]{1,4}:[0-9A-Fa-f]{1,4}|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))|(?:(?:[0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})?::)|[Vv][0-9A-Fa-f]+\\.[A-Za-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)|(?:[A-Za-z0-9\\-._~!$&'()*+,;=]|%[0-9A-Fa-f]{2})*)(?::[0-9]*)?(?:\\/(?:[A-Za-z0-9\\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*|\\/(?:(?:[A-Za-z0-9\\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})+(?:\\/(?:[A-Za-z0-9\\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*)?|(?:[A-Za-z0-9\\-._~!$&'()*+,;=@]|%[0-9A-Fa-f]{2})+(?:\\/(?:[A-Za-z0-9\\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*|)(?:\\?(?:[A-Za-z0-9\\-._~!$&'()*+,;=:@\\/?]|%[0-9A-Fa-f]{2})*)?(?:\\#(?:[A-Za-z0-9\\-._~!$&'()*+,;=:@\\/?]|%[0-9A-Fa-f]{2})*)?)$/i.test(",")"],["!/^(?:[A-Za-z][A-Za-z0-9+\\\\-.]*:(?:\\\\/\\\\/(?:(?:[A-Za-z0-9\\\\-._~!$&\\'()*+,;=:]|%[0-9A-Fa-f]{2})*@)?(?:\\\\[(?:(?:(?:(?:[0-9A-Fa-f]{1,4}:){6}|::(?:[0-9A-Fa-f]{1,4}:){5}|(?:[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,1}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){3}|(?:(?:[0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){2}|(?:(?:[0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}:|(?:(?:[0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})?::)(?:[0-9A-Fa-f]{1,4}:[0-9A-Fa-f]{1,4}|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))|(?:(?:[0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})?::)|[Vv][0-9A-Fa-f]+\\\\.[A-Za-z0-9\\\\-._~!$&\\'()*+,;=:]+)\\\\]|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)|(?:[A-Za-z0-9\\\\-._~!$&\\'()*+,;=]|%[0-9A-Fa-f]{2})*)(?::[0-9]*)?(?:\\\\/(?:[A-Za-z0-9\\\\-._~!$&\\'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*|\\\\/(?:(?:[A-Za-z0-9\\\\-._~!$&\\'()*+,;=:@]|%[0-9A-Fa-f]{2})+(?:\\\\/(?:[A-Za-z0-9\\\\-._~!$&\\'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*)?|(?:[A-Za-z0-9\\\\-._~!$&\\'()*+,;=:@]|%[0-9A-Fa-f]{2})+(?:\\\\/(?:[A-Za-z0-9\\\\-._~!$&\\'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*|)(?:\\\\?(?:[A-Za-z0-9\\\\-._~!$&\\'()*+,;=:@\\\\/?]|%[0-9A-Fa-f]{2})*)?(?:\\\\#(?:[A-Za-z0-9\\\\-._~!$&\\'()*+,;=:@\\\\/?]|%[0-9A-Fa-f]{2})*)?|(?:\\\\/\\\\/(?:(?:[A-Za-z0-9\\\\-._~!$&\\'()*+,;=:]|%[0-9A-Fa-f]{2})*@)?(?:\\\\[(?:(?:(?:(?:[0-9A-Fa-f]{1,4}:){6}|::(?:[0-9A-Fa-f]{1,4}:){5}|(?:[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,1}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){3}|(?:(?:[0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){2}|(?:(?:[0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}:|(?:(?:[0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})?::)(?:[0-9A-Fa-f]{1,4}:[0-9A-Fa-f]{1,4}|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))|(?:(?:[0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})?::)|[Vv][0-9A-Fa-f]+\\\\.[A-Za-z0-9\\\\-._~!$&\\'()*+,;=:]+)\\\\]|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)|(?:[A-Za-z0-9\\\\-._~!$&\\'()*+,;=]|%[0-9A-Fa-f]{2})*)(?::[0-9]*)?(?:\\\\/(?:[A-Za-z0-9\\\\-._~!$&\\'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*|\\\\/(?:(?:[A-Za-z0-9\\\\-._~!$&\\'()*+,;=:@]|%[0-9A-Fa-f]{2})+(?:\\\\/(?:[A-Za-z0-9\\\\-._~!$&\\'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*)?|(?:[A-Za-z0-9\\\\-._~!$&\\'()*+,;=@]|%[0-9A-Fa-f]{2})+(?:\\\\/(?:[A-Za-z0-9\\\\-._~!$&\\'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*|)(?:\\\\?(?:[A-Za-z0-9\\\\-._~!$&\\'()*+,;=:@\\\\/?]|%[0-9A-Fa-f]{2})*)?(?:\\\\#(?:[A-Za-z0-9\\\\-._~!$&\\'()*+,;=:@\\\\/?]|%[0-9A-Fa-f]{2})*)?)$/i.test(",")"]),g=n(["!/^(?:(?:[^\\x00-\\x20\"'<>%\\\\^`{|}]|%[0-9a-f]{2})|\\{[+#.\\/;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?:\\:[1-9][0-9]{0,3}|\\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?:\\:[1-9][0-9]{0,3}|\\*)?)*\\})*$/i.test(",")"],["!/^(?:(?:[^\\\\x00-\\\\x20\"\\'<>%\\\\\\\\^\\`{|}]|%[0-9a-f]{2})|\\\\{[+#.\\\\/;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?:\\\\:[1-9][0-9]{0,3}|\\\\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?:\\\\:[1-9][0-9]{0,3}|\\\\*)?)*\\\\})*$/i.test(",")"]),F=r(2).expression;e.exports={alpha:F(i,"data"),alphanumeric:F(o,"data"),identifier:F(a,"data"),hexadecimal:F(s,"data"),numeric:F(c,"data"),"date-time":F(f,"data","data"),uppercase:F(u,"data","data"),lowercase:F(l,"data","data"),hostname:F(d,"data","data"),uri:F(p,"data"),email:F(h,"data"),ipv4:F(y,"data","data"),ipv6:F(m,"data"),regex:F(v,"data"),"json-pointer":F(A,"data"),"uri-reference":F(b,"data"),"uri-template":F(g,"data")}},function(e,t,r){"use strict";var n=r(11),i=r(12),o=r(13),a=r(14),s=r(16),c=r(17),f=r(18),u=r(19),l=r(20),d=r(21),p=r(22),h=r(23),y=r(24),m=r(25),v=r(26),A=r(27);e.exports={name:{$ref:s,required:n,format:i,property:o,type:a,not:c,anyOf:f,oneOf:u,allOf:l,dependencies:d,properties:p,patternProperties:h,items:y,contains:m,constant:v,propertyNames:A},list:[s,n,i,o,a,c,f,u,l,d,p,h,y,m,v,A]}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports={readOnly:"false",exclusiveMinimum:function(e){return"%s <= "+e.exclusiveMinimum},minimum:function(e){return"%s < "+e.minimum},exclusiveMaximum:function(e){return"%s >= "+e.exclusiveMaximum},maximum:function(e){return"%s > "+e.maximum},multipleOf:'($1/$2) % 1 !== 0 && typeof $1 === "number"',pattern:function(e){var t=void 0,r=void 0;return"string"==typeof e.pattern?t=e.pattern:(t=e.pattern[0],r=e.pattern[1]),'typeof ($1) === "string" && !'+new RegExp(t,r)+".test($1)"},minLength:'typeof $1 === "string" && function dltml(b,c){for(var a=0,d=b.length;a<d&&c;){var e=b.charCodeAt(a++);55296<=e&&56319>=e&&a<d&&56320!==(b.charCodeAt(a++)&64512)&&a--;c--}return!!c}($1, $2)',maxLength:'typeof $1 === "string" && function dmtml(b,c){for(var a=0,d=b.length;a<d&&0<=c;){var e=b.charCodeAt(a++);55296<=e&&56319>=e&&a<d&&56320!==(b.charCodeAt(a++)&64512)&&a--;c--}return 0>c}($1, $2)',minItems:"$1.length < $2 && Array.isArray($1)",maxItems:"$1.length > $2 && Array.isArray($1)",uniqueItems:function(e,t){return e.uniqueItems?(t(t.cache("{}")),'Array.isArray($1) && $1.some(function(item, key) {\n      if(item !== null && typeof item === "object") key = JSON.stringify(item);\n      else key = item;\n      if('+t.cache("{}")+".hasOwnProperty(key)) return true;\n      "+t.cache("{}")+"[key] = true;\n    })"):"true"},minProperties:'!Array.isArray($1) && typeof $1 === "object" && Object.keys($1).length < $2',maxProperties:'!Array.isArray($1) && typeof $1 === "object" && Object.keys($1).length > $2',enum:function(e,t){return e.enum.map((function(e){var r="$1",i=e;return"object"===(void 0===e?"undefined":n(e))?(i="'"+JSON.stringify(e)+"'",r=t.cache("JSON.stringify($1)")):"string"==typeof e&&(i="'"+encodeURIComponent(e)+"'"),r+" != decodeURIComponent("+i+")"})).join(" && ")}}},function(e,t,r){"use strict";e.exports=["$ref","$schema","type","not","anyOf","allOf","oneOf","properties","patternProperties","additionalProperties","items","additionalItems","required","default","title","description","definitions","dependencies","$id","contains","const","examples"]},function(e,t,r){"use strict";function n(e){return i.test(e)}var i=/:\/\//,o=/#\/?/,a=/(^[^:]+:\/\/[^?#]*\/).*/;e.exports={makePath:function(e){return e.filter((function(e){return"string"==typeof e})).reduce((function(e,t){if(!e.length||n(t))return t;if(!t)return e;if(0===t.indexOf("#")){var r=e.indexOf("#");return-1===r?e+t:e.slice(0,r)+t}var i=function(e){return e.replace(a,"$1")}(e)+t;return i+(-1===i.indexOf("#")?"#":"")}),"")},isFullUri:n,head:function(e){return"string"!=typeof e?e:e.split(o)[0]},fragment:function(e){return"string"!=typeof e?e:e.split(o)[1]},normalize:function(e){return decodeURIComponent(e.replace(/~1/g,"/").replace(/~0/g,"~"))},keys:{id:"$id"}}},function(e,t,r){e.exports=r(9)},function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(this instanceof n))return new n(e);this.options=e,this.resolved={},this.state=new l(null,this),this.useVersion(e.version,e.versionConfigure),this.addFormat(e.formats)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=r(2),a=o.restore,s=o.expression,c=r(3),f=r(10),u=f.generate,l=f.State,d=r(28),p=d.add,h=d.use;Object.assign(n,{expression:s}),Object.assign(n.prototype,{validate:function(e,t){return this.resolve(e).fn(t)},addSchema:function(e,t){var r=this,n="object"===(void 0===e?"undefined":i(e))?e:t,o={schema:n,fn:u(this,n,void 0,this.options)};return[e,t.id].filter((function(e){return"string"==typeof e})).forEach((function(e){r.resolved[e]=Object.assign({name:e},o)})),o},removeSchema:function(e){e?delete this.resolved[e]:this.resolved={}},resolve:function(e){return"object"!==(void 0===e?"undefined":i(e))&&this.resolved[e]?this.resolved[e]:this.addSchema(e,this.state.resolve(e))},export:function(e){var t=this,r=void 0;return e?r={name:e,schema:(r=this.resolve(e)).schema,fn:r.fn.toString()}:(r={},Object.keys(this.resolved).forEach((function(e){r[e]={name:e,schema:t.resolved[e].schema,fn:t.resolved[e].fn.toString()}}))),JSON.stringify(r)},import:function(e){var t=this,r=JSON.parse(e),n=r;r.name&&r.fn&&r.schema&&(n=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},r.name,r)),Object.keys(n).forEach((function(e){var r=n[e],i=r.name,o=r.schema,s=r.fn,c=a(s,o,t.options);t.resolved[i]={name:i,schema:o,fn:c}}))},addFormat:function(e,t){"string"!=typeof e?"object"===(void 0===e?"undefined":i(e))&&Object.assign(c,e):c[e]=t},setErrorHandler:function(e){Object.assign(this.options,{errorHandler:e})},useVersion:function(e,t){"function"!=typeof t&&"draft-04"===e&&(t=r(29)),"function"==typeof t&&p(e,t),h(e)}}),e.exports=n},function(e,t,r){"use strict";function n(){var e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments[1]);Object.assign(this,{context:[],entries:new Map,env:e})}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new n(t,e),i=arguments[3],o=f(r,i);o.visit(t);var a=s(o,r,i);return c(a,t,i)}var o=r(4).list,a=r(2),s=a.body,c=a.restore,f=a.template,u=r(0).hasProperty,l=r(7),d=l.normalize,p=l.makePath,h=l.head,y=l.isFullUri,m=l.fragment,v=l.keys,A=r(1),b=A.is,g=A.transform;n.prototype=Object.assign(Object.create(Array.prototype),{addEntry:function(e,t){var r=this.entries.get(t);return!1===r?this.context.push(t):(void 0===r&&(this.entries.set(t,!1),r=i(this.env,t,this,{inner:!0}),this.entries.set(t,r),this.revealReference(t)),this.context.push(r))},revealReference:function(e){for(var t=this.context.indexOf(e);-1!==t;t=this.context.indexOf(e))this.context[t]=this.context.length},link:function(e){var t=this.resolve(e);return this.addEntry(e,t)},resolveReference:function(e){if(y(e))return e;for(var t=void 0,r=void 0,n=this.length-1;n>=0;n-=1,t=!1){var i=this[n],o=i[v.id],a=i.$ref;if(y(t=o||a)){r=n;break}}for(var s=[],c=this.length-1;c>r;c-=1){var f=this[c],u=f[v.id],l=f.$ref,d=u||l;h(d)&&s.push(d)}return p([t].concat(s,[e]))},ascend:function(e){for(var t=h(e),r=(this.env.resolved[t]||{}).schema,n=void 0===r?this[0]:r;n.$ref&&h(n.$ref)!==h(e)&&1===Object.keys(n).length;)n=this.ascend(n.$ref);return n},descend:function(e,t){var r=this,n=m(e);if(!n&&y(e))return t;n||(n=e);var i=n.split("/"),o=i.map(d).reduce((function(e,t,n){var o=e[t];return b(o)||(o=e.definitions&&e.definitions[t]),n!==i.length-1&&u(o,v.id)&&r.push(o),o}),t);return b(o)?o:t},resolve:function(e){if("string"!=typeof e)return e;var t=this.resolveReference(e),r=this.ascend(t);return this.descend(e,r)},visit:function(e,t){var r=g(e),n=this.length;this.push(r),o.some((function(e){return e(r,t)})),this.length=n}}),e.exports={State:n,generate:i}},function(e,t,r){"use strict";e.exports=function(e,t){Array.isArray(e.required)&&t("if ("+t.data+" !== null && typeof "+t.data+" === 'object' && !Array.isArray("+t.data+")) {\n    "+e.required.map((function(e){return"if (!"+t.data+'.hasOwnProperty(decodeURIComponent("'+encodeURIComponent(e)+'"))) '+t.error("required",e)})).join("")+"\n  }")}},function(e,t,r){"use strict";var n=r(3);e.exports=function(e,t){if(void 0!==e.format){var r=n[e.format];"function"==typeof r&&t("if ("+r({data:t.data,schema:e})+") "+t.error("format"))}}},function(e,t,r){"use strict";var n=r(5),i=r(6),o=r(0).asExpression;e.exports=function(e,t){Object.keys(e).forEach((function(r){if(-1===i.indexOf(r)&&"format"!==r){var a=o(n[r],e,t);if(a){var s=t.error(r);t("if ("+a+") "+s,t.data,e[r])}}}))}},function(e,t,r){"use strict";var n=r(15),i=r(0).hasProperty;e.exports=function(e,t){if(i(e,"type")){var r=t.error("type",e.type);t("if (("+[].concat(e.type).map((function(e){return n[e]})).join(") && (")+")) "+r,t.data)}}},function(e,t,r){"use strict";e.exports={null:"%s !== null",string:'typeof %s !== "string"',boolean:'typeof %s !== "boolean"',number:'typeof %s !== "number" || %s !== %s',integer:'typeof %s !== "number" || %s % 1 !== 0',object:'!%s || typeof %s !== "object" || Array.isArray(%s)',array:"!Array.isArray(%s)",date:"!(%s instanceof Date)"}},function(e,t,r){"use strict";var n=r(0).hasProperty;e.exports=function(e,t){return!!n(e,"$ref")&&(t("if ("+t.link(e.$ref)+"("+t.data+")) "+t.error("$ref")),!0)}},function(e,t,r){"use strict";var n=r(0).hasProperty;e.exports=function(e,t){n(e,"not")&&t("if (!"+t.link(e.not)+"("+t.data+")) "+t.error("not"))}},function(e,t,r){"use strict";var n=r(0).hasProperty;e.exports=function(e,t){if(n(e,"anyOf")){var r=t.error("anyOf"),i=e.anyOf.map((function(e){return t.link(e)+"("+t.data+")"})).join(" && ");t("if ("+i+") "+r)}}},function(e,t,r){"use strict";var n=r(0).hasProperty;e.exports=function(e,t){if(n(e,"oneOf")){var r=e.oneOf.map((function(e){return t.link(e)})),i=t.cache("["+r+"]"),o=t.cache("["+r+"]"),a=t.cache(o+".length - 1"),s=t.cache(o+".length - 1"),c=t.cache("0"),f=t.cache("0"),u=t.error("oneOf");t("for (\n    "+i+", "+a+", "+c+";\n    "+s+" >= 0 && "+s+" < "+o+".length;\n    "+s+"--) {\n      if(!"+o+"["+s+"]("+t.data+")) "+f+"++;\n    }\n    if ("+f+" !== 1) "+u+"\n  ")}}},function(e,t,r){"use strict";var n=r(0).hasProperty;e.exports=function(e,t){if(n(e,"allOf")){var r=t.error("allOf"),i=e.allOf.map((function(e){return t.link(e)+"("+t.data+")"})).join(" || ");t("if ("+i+") "+r)}}},function(e,t,r){"use strict";var n=r(0).hasProperty,i=r(1).is;e.exports=function(e,t){n(e,"dependencies")&&Object.keys(e.dependencies).forEach((function(r){var n=e.dependencies[r],o=t.error("dependencies");t("if ("+t.data+'.hasOwnProperty(decodeURIComponent("'+encodeURIComponent(r)+'"))) {'),Array.isArray(n)||"string"==typeof n?[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(n)).map((function(e){return"if (!"+t.data+'.hasOwnProperty(decodeURIComponent("'+encodeURIComponent(e)+'"))) '+o})).map(t):i(n)&&t.visit(n),t("}")}))}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(0).hasProperty;e.exports=function(e,t){i(e,"properties")&&"object"===n(e.properties)&&Object.keys(e.properties).forEach((function(r){var i=e.properties[r];if("object"!==(void 0===i?"undefined":n(i))||Object.keys(i).length){var o=!e.required||-1===e.required.indexOf(r);o&&t("if ("+t.data+'.hasOwnProperty(decodeURIComponent("'+encodeURIComponent(r)+'"))) {'),t.data.push("[decodeURIComponent('"+encodeURIComponent(r)+"')]"),t.visit(i),t.data.pop(),o&&t("}")}}))}},function(e,t,r){"use strict";var n=r(0).hasProperty;e.exports=function(e,t){var r=n(e,"additionalProperties")&&!0!==e.additionalProperties,i=n(e,"patternProperties");if(r||i){t("if(typeof "+t.data+" === 'object' && !Array.isArray("+t.data+")) {"),t(t.cache("null"));var o=t.cache("null"),a=function(){!1===e.additionalProperties?t(t.error("additionalProperties")):e.additionalProperties&&(t.data.push("["+o+"]"),t.visit(e.additionalProperties),t.data.pop())};t("for ("+o+" in "+t.data+") {"),r&&i&&t(t.cache("false")),i?Object.keys(e.patternProperties).forEach((function(n){t("if ("+new RegExp(n)+".test("+o+")) {"),r&&t(t.cache("false")+" = true;");var i=e.patternProperties[n];t.data.push("["+o+"]"),t.visit(i),t.data.pop(),t("}"),e.properties?t("if ("+(r?t.cache("false")+" || ":"")+" "+t.schema+".properties.hasOwnProperty("+o+")) continue;"):r&&t("if ("+t.cache("false")+") continue;"),a()})):(e.properties&&t("if("+t.schema+".properties.hasOwnProperty("+o+")) continue;"),a()),t("}}")}}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(0).hasProperty;e.exports=function(e,t){if(i(e,"items")){var r=e.items.length,o=t.error("additionalItems"),a=t.data;if(t("if(Array.isArray("+a+")) {"),Array.isArray(e.items)){if(!1===e.additionalItems&&t("if ("+a+".length > "+r+") "+o),e.items.forEach((function(e,r){t("if("+a+".length > "+r+") {"),a.push("["+r+"]"),t.visit(e),a.pop(),t("}")})),"object"===n(e.additionalItems)){var s=t.cache(r),c=t.cache(r);t("for ("+s+"; "+c+" < "+a+".length; "+c+"++) {"),a.push("["+t.cache(r)+"]"),t.visit(e.additionalItems),a.pop(),t("}")}}else{var f=t.cache("0"),u=t.cache("0");t("for ("+f+"; "+u+" < "+a+".length; "+u+"++) {"),a.push("["+u+"]"),t.visit(e.items),a.pop(),t("}")}t("}")}}},function(e,t,r){"use strict";var n=r(0).hasProperty;e.exports=function(e,t){if(n(e,"contains")){var r=t.error("contains"),i=""+t.link(e.contains),o=t.data,a=t.cache("0"),s=t.cache("0");t("if (Array.isArray("+o+")) {\n    if ("+o+".length === 0) "+r+"\n      for ("+a+"; "+s+" < "+o+".length; "+s+"++) {\n        if (!"+i+"("+o.toString.apply(o.concat("["+s+"]"))+")) break;\n        if ("+s+" === "+o+".length - 1) "+r+"\n      }\n  }")}}},function(e,t,r){"use strict";var n=r(0).hasProperty,i=r(1).make;e.exports=function(e,t){if(n(e,"const")){var r=i(e.const);t.visit(r)}}},function(e,t,r){"use strict";var n=r(0).hasProperty;e.exports=function(e,t){if(n(e,"propertyNames")){var r=t.link(e.propertyNames),i=t.error("propertyNames");t("if (Object.keys("+t.data+").some("+r+")) "+i)}}},function(e,t,r){"use strict";var n=r(5),i=r(6),o=r(4),a=r(3),s=r(7).keys,c=r(1).transformation,f={};e.exports={add:function(e,t){f[e]=t},use:function(e){e&&f[e]&&(0,f[e])({properties:n,keywords:i,validators:o,formats:a,keys:s,transformation:c})}}},function(e,t){e.exports=n}]))},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","title":"Script schema","description":"This document outlines the correct formatting for the script schema","type":"object","required":["firstScene","scenes"],"properties":{"shortName":{"type":"string","description":"A short, succinct title","default":""},"longName":{"type":"string","description":"A more verbose name for the script","default":""},"author":{"type":"string","description":"Name of the author","default":""},"description":{"type":"string","description":"A brief description of the story","default":""},"firstScene":{"type":"string","description":"The name of the first scene. Must exist in in scenes object.","default":""},"language":{"type":"string","description":"The default language of the story","examples":["en_GB"]},"scenes":{"type":"object","additionalProperties":{"type":"object","required":["video","events"],"properties":{"longName":{"type":"string","description":"Name of scene","default":""},"video":{"type":"object","required":["sources"],"properties":{"loop":{"properties":{"in":{"type":"integer","description":"Loop in point (in milliseconds)","minimum":0},"out":{"type":"integer","description":"Loop out point (in milliseconds)"}}},"muted":{"type":"boolean","description":"Mute audio","default":false},"sources":{"type":"object","properties":{"mp4":{"type":"string","description":"Relative path to mp4 asset","default":""},"ogg":{"type":"string","description":"Relative path to ogg asset","default":""},"webm":{"type":"string","description":"Relative path to webm asset","default":""},"duration":{"type":"integer","description":"Length of video file"},"subtitles":{"type":"object","additionalProperties":{"type":"string","description":"Relative path to subtitles file","default":""}}}}}},"events":{"type":"array","items":{"$ref":"#/definitions/event"}}}}}},"definitions":{"event":{"type":"object","required":["in","out"],"properties":{"type":{"type":"string","description":"The type of event to fire","default":""},"disabled":{"type":"boolean","description":"Flag to determine if the event should be disabled","default":false},"in":{"type":"integer","description":"Loop in point (in milliseconds)","default":0,"minimum":0},"out":{"type":"integer","description":"Loop out point (in milliseconds)","default":0},"payload":{"type":"object","description":"Additional data to transmit with the event","default":{},"additionalProperties":true}}}}}')},function(e){e.exports=JSON.parse('{"private":false,"name":"loomse","version":"0.6.0","description":"Interactive storytelling for the modern web","author":"Franco Speziali","license":"GPL-3.0","homepage":"http://www.loomse.org/","repository":{"type":"git","url":"https://github.com/WeMakeMachines/loomse.git"},"main":"dist/loomse.min.js","scripts":{"dev":"webpack --config webpack.config.js --devtool=\'source-map\' --watch --mode=\'development\'","build":"webpack --config webpack.config.js --mode=\'production\' -o dist/loomse.min.js","prettier":"prettier --write \'source/**/*.js\'","eslint":"eslint source","test":"jest"},"devDependencies":{"@babel/cli":"^7.7.4","@babel/core":"^7.7.4","@babel/preset-env":"^7.7.4","babel-eslint":"^10.0.3","babel-jest":"^24.9.0","babel-loader":"^8.0.6","eslint":"^6.7.2","eslint-plugin-jest":"^23.1.1","jest":"^24.9.0","prettier":"1.19.1","webpack":"^4.41.2","webpack-cli":"^3.3.10"},"dependencies":{"djv":"^2.1.3-alpha.0","redom":"^3.24.1"}}')},function(e,t,r){!function(){"use strict";e.exports=function(e){var t=e.properties,r=e.keywords,n=e.validators,i=e.formats,o=e.keys,a=e.transformation;Object.assign(t,{minimum:function(e){return"%s <"+(e.exclusiveMinimum?"=":"")+" "+e.minimum},maximum:function(e){return"%s >"+(e.exclusiveMaximum?"=":"")+" "+e.maximum}}),delete t.exclusiveMaximum,delete t.exclusiveMinimum,["$id","contains","const","examples"].forEach((function(e){var t=r.indexOf(e);-1!==t&&r.splice(t,1)})),-1===r.indexOf("exclusiveMaximum")&&r.push("exclusiveMaximum","exclusiveMininum","id"),["contains","constant","propertyNames"].forEach((function(e){var t=n.name[e];delete n.name[e];var r=n.list.indexOf(t);-1!==r&&n.list.splice(r,1)})),delete i["json-pointer"],delete i["uri-reference"],delete i["uri-template"],Object.assign(o,{id:"id"}),Object.assign(a,{ANY_SCHEMA:!0,NOT_ANY_SCHEMA:!1})}}()},function(e,t,r){"use strict";function n(e,t){var r=function(e){for(var t=!1,r=!1,n="",i="",o="",a=0;a<e.length;a++){var s=e[a];"."===s?(r=!0,t=!1,o.length>0&&(o+=" ")):"#"===s?(t=!0,r=!1):t?i+=s:r?o+=s:n+=s}return{tag:n||"div",id:i,className:o}}(e),n=r.tag,i=r.id,o=r.className,a=t?document.createElementNS(t,n):document.createElement(n);return i&&(a.id=i),o&&(t?a.setAttribute("class",o):a.className=o),a}function i(e,t){var r=A(e),n=A(t);return t===n&&n.__redom_view&&(t=n.__redom_view),n.parentNode&&(o(t,n,r),r.removeChild(n)),t}function o(e,t,r){var n=t.__redom_lifecycle;if(a(n))t.__redom_lifecycle={};else{var i=r;for(t.__redom_mounted&&u(t,"onunmount");i;){var o=i.__redom_lifecycle||{};for(var s in n)o[s]&&(o[s]-=n[s]);a(o)&&(i.__redom_lifecycle=null),i=i.parentNode}}}function a(e){if(null==e)return!0;for(var t in e)if(e[t])return!1;return!0}r.r(t);var s=["onmount","onremount","onunmount"],c="undefined"!=typeof window&&"ShadowRoot"in window;function f(e,t,r,n){var i=A(e),a=A(t);t===a&&a.__redom_view&&(t=a.__redom_view),t!==a&&(a.__redom_view=t);var f=a.__redom_mounted,l=a.parentNode;return f&&l!==i&&o(0,a,l),null!=r?n?i.replaceChild(a,A(r)):i.insertBefore(a,A(r)):i.appendChild(a),function(e,t,r,n){for(var i=t.__redom_lifecycle||(t.__redom_lifecycle={}),o=r===n,a=!1,f=0,l=s;f<l.length;f+=1){var d=l[f];o||e!==t&&d in e&&(i[d]=(i[d]||0)+1),i[d]&&(a=!0)}if(!a)return void(t.__redom_lifecycle={});var p=r,h=!1;(o||p&&p.__redom_mounted)&&(u(t,o?"onremount":"onmount"),h=!0);for(;p;){var y=p.parentNode,m=p.__redom_lifecycle||(p.__redom_lifecycle={});for(var v in i)m[v]=(m[v]||0)+i[v];if(h)break;(p.nodeType===Node.DOCUMENT_NODE||c&&p instanceof ShadowRoot||y&&y.__redom_mounted)&&(u(p,o?"onremount":"onmount"),h=!0),p=y}}(t,a,i,l),t}function u(e,t){"onmount"===t||"onremount"===t?e.__redom_mounted=!0:"onunmount"===t&&(e.__redom_mounted=!1);var r=e.__redom_lifecycle;if(r){var n=e.__redom_view,i=0;for(var o in n&&n[t]&&n[t](),r)o&&i++;if(i)for(var a=e.firstChild;a;){var s=a.nextSibling;u(a,t),a=s}}}function l(e,t,r){var n=A(e);if("object"==typeof t)for(var i in t)d(n,i,t[i]);else d(n,t,r)}function d(e,t,r){e.style[t]=null==r?"":r}var p="http://www.w3.org/1999/xlink";function h(e,t,r,n){var i=A(e);if("object"==typeof t)for(var o in t)h(i,o,t[o],n);else{var a=i instanceof SVGElement,s="function"==typeof r;if("style"===t&&"object"==typeof r)l(i,r);else if(a&&s)i[t]=r;else if("dataset"===t)!function e(t,r,n){if("object"==typeof r)for(var i in r)e(t,i,r[i]);else null!=n?t.dataset[r]=n:delete t.dataset[r]}(i,r);else if(!a&&(t in i||s)&&"list"!==t)i[t]=r;else{if(a&&"xlink"===t)return void function e(t,r,n){if("object"==typeof r)for(var i in r)e(t,i,r[i]);else null!=n?t.setAttributeNS(p,r,n):t.removeAttributeNS(p,r,n)}(i,r);n&&"class"===t&&(r=i.className+" "+r),null==r?i.removeAttribute(t):i.setAttribute(t,r)}}}function y(e){return document.createTextNode(null!=e?e:"")}function m(e,t,r){for(var n=0,i=t;n<i.length;n+=1){var o=i[n];if(0===o||o){var a=typeof o;"function"===a?o(e):"string"===a||"number"===a?e.appendChild(y(o)):b(A(o))?f(e,o):o.length?m(e,o,r):"object"===a&&h(e,o,null,r)}}}function v(e){return"string"==typeof e?F(e):A(e)}function A(e){return e.nodeType&&e||!e.el&&e||A(e.el)}function b(e){return e&&e.nodeType}var g={};function F(e){for(var t,r=[],n=arguments.length-1;n-- >0;)r[n]=arguments[n+1];var i=typeof e;if("string"===i)t=O(e).cloneNode(!1);else if(b(e))t=e.cloneNode(!1);else{if("function"!==i)throw new Error("At least one argument required");var o=e;t=new(Function.prototype.bind.apply(o,[null].concat(r)))}return m(A(t),r,!0),t}var w=F;function O(e){return g[e]||(g[e]=n(e))}function _(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];for(var n=function e(t,r,n){var i=n;var o=new Array(r.length);for(var a=0;a<r.length;a++)o[a]=r[a]&&A(r[a]);for(var s=0;s<r.length;s++){var c=r[s];if(c){var u=o[s];if(u!==i)if(b(u)){var l=i&&i.nextSibling,d=null!=c.__redom_index&&l===o[s+1];f(t,c,i,d),d&&(i=l)}else null!=c.length&&(i=e(t,c,i));else i=i.nextSibling}}return i}(e,t,A(e).firstChild);n;){var o=n.nextSibling;i(e,n),n=o}}F.extend=function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];var n=O(e);return F.bind.apply(F,[this,n].concat(t))};var j=function(e,t,r){this.View=e,this.initData=r,this.oldLookup={},this.lookup={},this.oldViews=[],this.views=[],null!=t&&(this.key="function"==typeof t?t:function(e){return function(t){return t[e]}}(t))};j.prototype.update=function(e,t){for(var r=this.View,n=this.key,i=this.initData,o=null!=n,a=this.lookup,s={},c=new Array(e.length),f=this.views,u=0;u<e.length;u++){var l=e[u],d=void 0;if(o){var p=n(l);d=a[p]||new r(i,l,u,e),s[p]=d,d.__redom_id=p}else d=f[u]||new r(i,l,u,e);d.update&&d.update(l,u,e,t),A(d.el).__redom_view=d,c[u]=d}this.oldViews=f,this.views=c,this.oldLookup=a,this.lookup=s};var x=function(e,t,r,n){this.__redom_list=!0,this.View=t,this.initData=n,this.views=[],this.pool=new j(t,r,n),this.el=v(e),this.keySet=null!=r};x.prototype.update=function(e,t){void 0===e&&(e=[]);var r=this.keySet,n=this.views;this.pool.update(e,t);var o=this.pool,a=o.views,s=o.lookup;if(r)for(var c=0;c<n.length;c++){var f=n[c];null==s[f.__redom_id]&&(f.__redom_index=null,i(this,f))}for(var u=0;u<a.length;u++){a[u].__redom_index=u}_(this,a),r&&(this.lookup=s),this.views=a},x.extend=function(e,t,r,n){return x.bind(x,e,t,r,n)},x.extend;var $=function(e,t){this.el=y(""),this.visible=!1,this.view=null,this._placeholder=this.el,e instanceof Node?this._el=e:e.el instanceof Node?(this._el=e,this.view=e):this._View=e,this._initData=t};$.prototype.update=function(e,t){var r=this._placeholder,n=this.el.parentNode;if(e){if(!this.visible)if(this._el)f(n,this._el,r),i(n,r),this.el=A(this._el),this.visible=e;else{var o=new(0,this._View)(this._initData);this.el=A(o),this.view=o,f(n,o,r),i(n,r)}this.view&&this.view.update&&this.view.update(t)}else if(this.visible){if(this._el)return f(n,r,this._el),i(n,this._el),this.el=r,void(this.visible=e);f(n,r,this.view),i(n,this.view),this.el=r,this.view=null}this.visible=e};var S=function(e,t,r){this.el=v(e),this.Views=t,this.initData=r};S.prototype.update=function(e,t){if(e!==this.route){var r=this.Views[e];this.route=e,r&&(r instanceof Node||r.el instanceof Node)?this.view=r:this.view=r&&new r(this.initData,t),_(this.el,[this.view])}this.view&&this.view.update&&this.view.update(t,e)};var P="http://www.w3.org/2000/svg",k={};function z(e){for(var t,r=[],n=arguments.length-1;n-- >0;)r[n]=arguments[n+1];var i=typeof e;if("string"===i)t=Z(e).cloneNode(!1);else if(b(e))t=e.cloneNode(!1);else{if("function"!==i)throw new Error("At least one argument required");var o=e;t=new(Function.prototype.bind.apply(o,[null].concat(r)))}return m(A(t),r,!0),t}function Z(e){return k[e]||(k[e]=n(e,P))}z.extend=function(e){var t=Z(e);return z.bind(this,t)},z.ns=P;var E={position:"absolute",top:0,left:0,"z-index":0,"background-color":"#000"};var N=class{constructor(e){let{shortName:t,longName:r,author:n,description:i,firstScene:o,language:a,scenes:s}=e;this.shortName=t,this.longName=r,this.author=n,this.description=i,this.firstScene=o,this.scenes=s,this.language=a}},C={width:"100%",height:"100%"};const D="start",T="stop";var I=class{constructor(e){this.events=e,this.queue=this.build(),this.index=0,this.sort("asc")}get pending(){if(!(this.index>this.queue.length-1))return this.queue[this.index]}getTimedObject(e){return this.events[e]}advance(){this.index+=1}build(){const e=[];for(let t=0;t<this.events.length;t+=1){const r={id:t,time:this.events[t].in,action:D},n={id:t,time:this.events[t].out,action:T};e.push(r,n)}return e}sort(e){switch(e){case"desc":this.queue.sort((e,t)=>t.time-e.time);break;case"asc":default:this.queue.sort((e,t)=>e.time-t.time)}}};const R="video:ended",M="video:durationchange",U="video:paused",q="video:playing",L="video:seeked",V="video:seeking",J="video:timeupdate",H=1e3;class G extends Error{}class Y{constructor(e){let{events:t,startEventCallback:r,stopEventCallback:n}=e;this.queue=new I(t),this.startEventCallback=r,this.stopEventCallback=n,this.tokenTimeUpdate=re.register(J,this.isReadyToAction,this)}unRegister(){re.unRegister(this.tokenTimeUpdate)}isReadyToAction(e){if(!e)return;const t=function(e){return e*H}(e);t&&this.queue.pending&&t>=this.queue.pending.time&&this.parseAction(this.queue.pending)}parseAction(e){const t=this.queue.events[e.id];if(!t)throw new G("Event data not found");switch(e.action){case D:this.startEventCallback(t);break;case T:this.stopEventCallback(t);break;default:return}this.queue.advance()}}const B=e=>new Y(e);var K=r(0),W=r.n(K);var X=class{constructor(e){this.schema=e}validate(e){const t=new W.a;t.addSchema("script",this.schema);const r=t.validate("script",e);return!Boolean(r)}};const Q=(e,t)=>{return new X(t).validate(e)?Promise.resolve():Promise.reject("JSON does not match the schema")};function ee(e,t){return new Promise((r,n)=>{let i=new XMLHttpRequest;i.open("GET",e),i.send(),i.onload=()=>{if(200===i.status)switch(t){case"JSON":r(JSON.parse(i.responseText));break;default:r(i.responseText)}else n(i.status)},i.onerror=()=>{n("File or network error")}})}(()=>{let e})();function te(e,t){let r=t-e;return void 0===e&&(e=0),r<=0&&(r=t,e=0),Math.floor(Math.random()*r)+e}const re=new class{static tokenGenerator(e){if("number"!=typeof e)throw new Error("Length not a number");const t=[];for(let r=0;r<e;r+=1){let e;do{e=te(48,122)}while(e>57&&e<65||e>90&&e<97);t.push(String.fromCharCode(e))}return t.join("")}constructor(){this.registry={}}broadcast(e,t){this.registry[e]?Object.values(this.registry[e]).forEach(e=>{e.handler.call(e.context,t)}):console.warn("Channel not registered:",e)}unRegister(e){const t=Object.keys(this.registry).filter(t=>{return Object.keys(this.registry[t]).includes(e)});t?(delete this.registry[t][e],Object.keys(this.registry[t]).length||delete this.registry[t]):console.warn("Token not found")}register(e,t,r){const n=this.constructor.tokenGenerator(32);return this.registry[e]||(this.registry[e]={}),this.registry[e][n]={handler:t,context:r},n}},ne="director:play",ie="director:pause",oe="director:scenechange",ae="director:sceneevent";var se=class{constructor(e){this.events=B({events:e,startEventCallback:this.start,stopEventCallback:this.stop})}start(e){let{type:t,payload:r}=e;re.broadcast(ae,{action:D,type:t,payload:r})}stop(e){let{type:t,payload:r}=e;re.broadcast(ae,{action:T,type:t,payload:r})}},ce={position:"absolute",bottom:"20px",height:"5px",width:"100%","background-color":"#fff"};const fe={height:"5px",width:"0px","background-color":"yellow"};function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){de(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pe=class{constructor(){this.el=w(".progressCounter",{style:le({},fe)})}update(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)/(arguments.length>1?arguments[1]:void 0)*100;l(this.el,{width:"".concat(e,"%")})}};function he(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?he(Object(r),!0).forEach((function(t){me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):he(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function me(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ve=class{constructor(){this.el=w("#loomSE_timeline",{style:ye({},ce)},this.progressCounter=new pe),this.duration=999,this.tokenDurationChanged=re.register(M,e=>{this.duration=e}),this.tokenTimeUpdate=re.register(J,this.updateProgress,this)}updateProgress(e){this.progressCounter.update(e,this.duration)}};const Ae="mp4",be="ogg",ge="webm",Fe="video/mp4",we="video/ogg",Oe="video/webm";class _e extends Error{}var je=class{constructor(e,t){this.el=w("source",{src:t,type:this.mapFileFormatToMediaType(e)})}mapFileFormatToMediaType(e){switch(e){case Ae:return Fe;case be:return we;case ge:return Oe;default:throw new _e("Unable to process source in Video file")}}},xe={width:"100%",height:"100%","object-fit":"contain"};function $e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(r),!0).forEach((function(t){Pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ke extends Error{}var ze=class{constructor(e){let{controls:t=!1,loop:r=!1,muted:n=!1,sources:i={}}=e;this.el=w("video#loomSE_video",{autoplay:!1,controls:t,loop:r,muted:n,style:Se({},xe)}),this.sources=this.setSources(i),this.mountSources(),this.listenToVideoEvents(),this.tokenPause=re.register(ie,this.pause,this),this.tokenPlay=re.register(ne,this.play,this)}setSources(e){if(!e)throw new ke("No video sources found");const t={};for(const r in e)e.hasOwnProperty(r)&&(t[r]=new je(r,e[r]));return t}mountSources(){for(const e in this.sources){if(!this.sources.hasOwnProperty(e))continue;const t=this.sources[e];f(this.el,t.el)}}listenToVideoEvents(){this.el.addEventListener("ended",()=>{re.broadcast(R)}),this.el.addEventListener("durationchange",()=>{re.broadcast(M,this.el.duration)}),this.el.addEventListener("paused",()=>{re.broadcast(U)}),this.el.addEventListener("playing",()=>{re.broadcast(q,this.el.currentTime)}),this.el.addEventListener("seeked",()=>{re.broadcast(L,this.el.currentTime)}),this.el.addEventListener("seeking",()=>{re.broadcast(V,this.el.currentTime)}),this.el.addEventListener("timeupdate",()=>{re.broadcast(J,this.el.currentTime)})}stopListeningToRadio(){re.unRegister(this.tokenPause),re.unRegister(this.tokenPlay)}play(){this.el.play().then(()=>{}).catch(()=>{})}pause(){this.el.pause()}playPause(){this.el.paused?this.play():this.pause()}};function Ze(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(r),!0).forEach((function(t){Ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ze(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ce=class{constructor(e,t){let{events:r,longName:n,video:i}=t;re.broadcast(oe,e),this.el=w("#loomSE_scene",{style:Ee({},C)},this.timeline=new ve,this.video=new ze(i)),this.events=new se(r),this.longName=n,this.video.play()}},De=r(1);new class{constructor(){this.currentScene="",this.registerListeners()}registerListeners(){re.register(oe,e=>{this.currentScene=e})}};const Te=new class{constructor(){this.currentDuration=0,this.currentTime=0,this.registerListeners()}registerListeners(){re.register(M,e=>{this.currentDuration=e}),re.register(J,e=>{this.currentTime=e})}},Ie=()=>Te.currentDuration,Re=()=>Te.currentTime;class Me extends Error{}new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;this.ref=e,this.storageKey="data",this.data={},this.isAvailable=this.checkIsAvailable()}checkIsAvailable(){try{return this.isAvailable=!0,this.ref.localStorage.setItem("test",{}),this.ref.localStorage.removeItem("test"),!0}catch(e){throw new Me("Unable to access local storage, ".concat(e))}}getData(){if(!this.isAvailable)return;const e=this.ref.localStorage.getItem(this.storageKey);return e?(this.data=JSON.parse(e),this.data):void 0}saveData(e,t){if(!this.isAvailable)return;this.data[e]||(this.data[e]=[]),this.data[e].push(t);const r=JSON.stringify(this.data);try{this.ref.localStorage.setItem(this.storageKey,r)}catch(e){throw new Me("Unable to access local storage, ".concat(e))}}};function Ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(r),!0).forEach((function(t){Le(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ve=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.el=w("#loomSE",{style:qe({},E,{width:"".concat(e.width,"px"),height:"".concat(e.height,"px")})}),this.story={},this.scene={},this.setupSyntheticEvents()}currentDuration(){return Ie()}currentTime(){return Re()}loadScriptFromUrl(e){return new Promise((t,r)=>{ee(e,"JSON").then(e=>{t(e)}).catch(e=>{r("Unable to load script from url",e)})})}validateJson(e){return new Promise((t,r)=>{Q(e,De).then(()=>{t()}).catch(e=>{r("Not a valid script",e)})})}setStory(e){this.story=new N(e)}loadScene(e){this.scene&&this.unloadScene(),this.scene=new Ce(e,this.story.scenes[e]),f(this.el,this.scene)}unloadScene(){}pause(){re.broadcast(ie)}play(){re.broadcast(ne)}resize(e,t){l(this.el,{width:"".concat(e,"px"),height:"".concat(t,"px")})}setupSyntheticEvents(){re.register(ae,e=>{this.el.dispatchEvent(new CustomEvent(ae,{detail:e}))},this)}},Je=r(2);function He(e,t){const r=Je.version,n=new Ve(t);return f(e,n),{currentDuration:()=>n.currentDuration(),currentTime:()=>n.currentTime(),el:n.el,async loadScriptFromJson(e){try{return await n.validateJson(e),n.setStory(e),n.loadScene(n.story.firstScene),Promise.resolve()}catch(e){return Promise.reject("Unable to validate JSON, ".concat(e))}},async loadScriptFromUrl(e){try{const t=await n.loadScriptFromUrl(e);return this.loadScriptFromJson(t)}catch(e){return Promise.reject("Unable to load JSON, ".concat(e))}},pause(){n.pause()},play(){n.play()},reloadScene(){n.loadScene()},resize(e,t){n.resize(e,t)},skipTo(e){n.loadScene(e)},version:r,v:r}}r.d(t,"default",(function(){return He}))}]).default}));